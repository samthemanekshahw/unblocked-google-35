(this.webpackJsonp=this.webpackJsonp||[]).push([[69],{171:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return o}));var r=i(1),n=i(46);var a=new r.g;function hitmapContainsPoint(t){this.worldTransform.applyInverse(t,a);var e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x,n=0,o=!1;if(a.x>=r&&a.x<r+e&&(n=-i*this.anchor.y,a.y>=n&&a.y<n+i&&(o=!0)),!o)return!1;var s=this.texture,d=this.texture.baseTexture,u=d.resolution;if(!d.hitmap)return!0;var h=d.hitmap,p=Math.round((a.x-r+s.frame.x)*u)+Math.round((a.y-n+s.frame.y)*u)*d.realWidth,l=p%32;return 0!=(h[p/32|0]&1<<l)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o=function(t){var e,i;i=t,(e=Question44).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var n;n=Question44;function Question44(e){var i;_defineProperty(_assertThisInitialized(i=t.call(this,null,e)||this),"question",void 0),_defineProperty(_assertThisInitialized(i),"app",void 0),_defineProperty(_assertThisInitialized(i),"prevInteractionPoint",void 0),_defineProperty(_assertThisInitialized(i),"dragTarget",void 0),_defineProperty(_assertThisInitialized(i),"draggablePuzzles",void 0),i.app=e,i.interactive=!0;var n=i.addChild(r.m.from("./assets/questions/q44/q44-puzzle-2.png"));n.position.set(5,47);var a=i.addChild(r.m.from("./assets/questions/q44/q44-puzzle-3.png"));a.position.set(135,-5);var o=i.addChild(r.m.from("./assets/questions/q44/q44-puzzle-4.png"));o.position.set(311,-31);var s=i.addChild(r.m.from("./assets/questions/q44/q44-puzzle-7.png"));s.position.set(37,161);var d=i.addChild(r.m.from("./assets/questions/q44/q44-puzzle-6.png"));d.position.set(124,174);var u=i.addChild(r.m.from("./assets/questions/q44/q44-puzzle-5.png"));u.position.set(211,139);var h=i.addChild(r.m.from("./assets/questions/q44/q44-puzzle-1.png"));return h.position.set(320,57),o.hitArea=new r.d(134,104,10,8),o.interactive=!0,o.buttonMode=!0,o.on("pointerup",i.actionWin,_assertThisInitialized(i)),i.draggablePuzzles=[h,n,a,u,d,s],i.draggablePuzzles.forEach((function(t){t.interactive=!0,t.buttonMode=!0,t.draggable=!0,t.containsPoint=hitmapContainsPoint,t.on("pointerdown",i.onPointerDown,_assertThisInitialized(i))})),r.q.shared.add(i.updatePuzzlesHitmap,_assertThisInitialized(i)),i.prevInteractionPoint=new r.g,i.on("pointermove",i.onPointerMove,_assertThisInitialized(i)).on("pointerup",i.onPointerUp,_assertThisInitialized(i)).on("pointerupoutside",i.onPointerUp,_assertThisInitialized(i)),i}var a=Question44.prototype;return a.updatePuzzlesHitmap=function(){this.draggablePuzzles.forEach((function(t){0===t.texture.baseTexture.width||t.texture.baseTexture.hitmap||function(t,e){if(!t.resource)return!1;var i=t.resource.source,r=null;if(!i)return!1;var n=null;if(i.getContext)n=(r=i).getContext("2d");else{if(!(i instanceof Image))return!1;(r=document.createElement("canvas")).width=i.width,r.height=i.height,(n=r.getContext("2d")).drawImage(i,0,0)}for(var a=r.width,o=r.height,s=n.getImageData(0,0,a,o),d=t.hitmap=new Uint32Array(Math.ceil(a*o/32)),u=0;u<a*o;u++){var h=u%32,p=u/32|0;s.data[4*u+3]>=e&&(d[p]=d[p]|1<<h)}}(t.texture.baseTexture,255)})),this.draggablePuzzles.every((function(t){return t.texture.baseTexture.hitmap}))&&r.q.shared.remove(this.updatePuzzlesHitmap,this)},a.onPointerMove=function(t){if(!(!this.dragTarget||0===t.data.buttons||t.data.global.x<0||t.data.global.y<0||t.data.global.x>this.app.stage.renderer.screen.width||t.data.global.y>this.app.stage.renderer.screen.height)){var e=this.toLocal(t.data.global),i=new r.g(this.prevInteractionPoint.x-e.x,this.prevInteractionPoint.y-e.y);this.prevInteractionPoint=e,this.dragTarget.position.x-=i.x,this.dragTarget.position.y-=i.y}},a.onPointerDown=function(t){this.prevInteractionPoint=this.toLocal(t.data.global),this.dragTarget=t.target},a.onPointerUp=function(){this.dragTarget=null},Question44}(n.a)}}]);