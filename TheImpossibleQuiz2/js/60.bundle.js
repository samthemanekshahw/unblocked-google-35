(this.webpackJsonp=this.webpackJsonp||[]).push([[60],{109:function(t,i,e){"use strict";e.r(i),e.d(i,"default",(function(){return h}));var s=e(52),o=e(0),n=e(57),r=e(8),a=e(12);function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _defineProperty(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var h=function(t){var i,e;e=t,(i=Question39).prototype=Object.create(e.prototype),i.prototype.constructor=i,i.__proto__=e;var s;s=Question39;function Question39(i){var e;_defineProperty(_assertThisInitialized(e=t.call(this,"./assets/questions/q39/q39-number.png",i)||this),"here",void 0),_defineProperty(_assertThisInitialized(e),"round",void 0),_defineProperty(_assertThisInitialized(e),"back",void 0),_defineProperty(_assertThisInitialized(e),"box0",void 0),_defineProperty(_assertThisInitialized(e),"box1",void 0),_defineProperty(_assertThisInitialized(e),"bottle",void 0),_defineProperty(_assertThisInitialized(e),"key",void 0),_defineProperty(_assertThisInitialized(e),"glow",void 0),_defineProperty(_assertThisInitialized(e),"lock",void 0),_defineProperty(_assertThisInitialized(e),"keyDrag",!1),_defineProperty(_assertThisInitialized(e),"allTargets",[]),_defineProperty(_assertThisInitialized(e),"oldSpot",void 0),_defineProperty(_assertThisInitialized(e),"info",void 0),_defineProperty(_assertThisInitialized(e),"timeBomb",void 0),_defineProperty(_assertThisInitialized(e),"keyPoints",[]),_defineProperty(_assertThisInitialized(e),"tapPoint",{x:0,y:0}),_defineProperty(_assertThisInitialized(e),"sin",0),_defineProperty(_assertThisInitialized(e),"textDM",void 0),_defineProperty(_assertThisInitialized(e),"checkHint",void 0);e.label.x=5,e.label.y=4,e.box0=e.addChild(new o.c),e.box1=e.addChild(new o.c),e.box1.visible=!1,e.here=e.box0.addChild(o.n.from("./assets/questions/q11/q11_pad.png")),e.here.anchor.set(.5,.9),e.here.position.set(275,254),e.textDM=e.here.addChild(o.n.from("./assets/questions/q11/q11_m.png")),e.textDM.anchor.set(.5),e.textDM.y=-133,e.round=e.box0.addChild(o.n.from("./assets/questions/q11/q11-button.png")),e.round.anchor.set(.5),e.round.position.set(282,312),e.lock=e.box1.addChild(new r.a("./assets/questions/q11/lock/l*.png",17,0)),e.lock.position.set(512,199),e.lock.anchor.set(.5),e.lock.ID=3,e.lock.hitZone=e.lock.addChild(new o.e).beginFill(255,.01).drawRect(-25,-25,60,50);for(var s,n=[136,199,137,88,194,88,300,88],h=0;h<4;h++)(s=e.box1.addChild(new r.a("./assets/questions/q39/button/*.png",2,0))).position.set(n.shift(),n.shift()),s.anchor.set(.5),s.ID=1,s.hitZone=s.addChild(new o.e).beginFill(255,.01).drawCircle(0,0,20),e.allTargets.push(s);e.glow=e.box1.addChild(o.n.from("./assets/questions/q39/q39-bottle/effect.png")),e.glow.ID=0,e.glow.hitZone=e.glow.addChild(new o.e).beginFill(255,.01).drawCircle(0,0,40),e.glow.anchor.set(.5),e.glow.scale.set(.7),e.glow.position.set(228,204),e.allTargets.push(e.glow),e.bottle=e.box1.addChild(new r.a("./assets/questions/q39/q39-bottle/f*.png",4,0)),e.bottle.anchor.set(.5),e.bottle.position.set(228,207),e.bottle.on("poinerover",(function(){return e.glow.visible=!1})),e.back=e.box1.addChild(o.n.from("./assets/questions/q39/q39-back.png")),e.key=e.box1.addChild(o.n.from("./assets/questions/q11/q11-key.png")),e.key.anchor.set(.5),e.key.position.set(249,87),e.allTargets.push(e.key),e.key.ID=2,e.key.hitZone=e.key.addChild(new o.e).beginFill(255,.01).drawRect(-25,-15,50,30),n=[-18,-12,18,-5,18,12,-18,10];for(var l=0;l<4;l++)e.keyPoints.unshift(new o.g(n.shift(),n.shift()));return e.info=e.box1.addChild(o.n.from("./assets/questions/q39/q39-title-2.png")),e.info.anchor.set(.5),e.info.position.set(265,206),e.info.visible=!1,e.timeBomb=i.get(a.a).bombs.timeBomb,setTimeout((function(){e.timeBomb.stopBomb(!0)})),void 0===window.isTouchScreen?i.stage.signalClick.once(e.enableControl,_assertThisInitialized(e)):e.enableControl(),e}var h=Question39.prototype;return h.enableControl=function(){var t;if(window.isTouchScreen){this.round.on("pointerdown",this.startRun,this),this.back.on("pointerup",this.reset,this),this.textDM.texture=o.q.from("./assets/questions/q11/q11_m.png"),this.box1.removeChild(this.bottle),this.box1.removeChild(this.glow),this.glow.visible=!1;for(var i,e=[],s=0;s<this.box1.children.length;s++)1===(i=this.box1.getChildAt(s)).ID&&e.push(i);for(;e.length;)this.box1.removeChild(e.pop());t="./assets/questions/q39/q39-touch.png"}else this.round.on("pointerover",this.startRun,this),this.textDM.texture=o.q.from("./assets/questions/q11/q11_d.png"),this.key.on("pointerdown",this.startDrag,this).on("pointerup",this.startDrag,this).on("pointeroutside",this.startDrag,this).interactive=!0,this.key.buttonMode=!0,t="./assets/questions/q39/q39-back.png";this.round.interactive=!0,this.round.buttonMode=!0,this.back.on("pointermove",this.testMove,this),this.checkHint||(this.checkHint=new n.a(t))},h.startDrag=function(t){if("pointerdown"===t.type){var i=this.key.toLocal(t.data.global);this.tapPoint={x:i.x,y:i.y}}this.keyDrag="pointerdown"===t.type},h.showCursor=function(t){void 0===t&&(t=!0);var i=this.appp.stage.renderer.plugins.interaction;this.info.visible=!t,t?(i.cursorStyles.default="inherit",i.cursorStyles.pointer="pointer",i.setCursorMode("pointer"),i.setCursorMode("default")):(i.cursorStyles.default="none",i.cursorStyles.pointer="none",i.setCursorMode("pointer"),i.setCursorMode("default"))},h.startRun=function(t){this.box1.visible||(this.box1.visible=!0,this.box0.visible=!1,this.back.interactive=!0,this.timeBomb.resetBomb())},h.testMove=function(t){var i,e=this,s=this.box1.toLocal(t.data.global);if(this.keyDrag){if(window.isTouchScreen){if(0!=this.checkHint.getPixel(s.x,s.y))return void this.reset()}else for(var o=0;o<this.keyPoints.length;o++)if(i=this.key.toGlobal(this.keyPoints[o]),0!=this.checkHint.getPixel(i.x,i.y))return void this.reset()}else if(0!=this.checkHint.getPixel(s.x,s.y))return void this.reset();if(this.keyDrag){if(this.key.position.set(s.x-this.tapPoint.x,s.y-this.tapPoint.y),this.lock.containsPoint(s)){this.appp.overlays.stopBomb(),this.sounds.play("key_open"),this.keyDrag=!1,this.key.visible=!1,this.back.interactive=!1,this.lock.play(1,1,!1,(function(){return e.theEnd()}));this.lock.playQueue([1,2,2,2,2,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],!1,(function(){return e.theEnd()}))}}else{for(var n,r=!1,a=0;a<this.allTargets.length;a++)if((n=this.allTargets[a]).hitZone.containsPoint(t.data.global)){if(r=!0,0===n.ID){this.showCursor(!1),this.sounds.play("lvl39-67-108"),this.glow.visible=!1,this.bottle.play(0,1,!1,(function(){return e.bottle.stop(-1)})),this.allTargets.splice(a,1);break}1===n.ID?0===n.currentframe&&(this.oldSpot=n,n.stop(1)):2===n.ID&&window.isTouchScreen&&(this.keyDrag=!0)}!r&&this.oldSpot&&(this.oldSpot.stop(0),this.oldSpot=null)}},h.removeTarget=function(){for(var t=0;t<this.allTargets.length;t++);},h.theEnd=function(){var t=this;this.sounds.play("intro_222"),this.showCursor(),this.checkHint.destroy(),this.lock.playQueue([15,16],!0,(function(){return t.theEnd()})),this.lock.interactive=!0,window.isTouchScreen?this.lock.once("pointerup",(function(){t.actionWin()})):this.lock.once("pointerover",(function(){t.actionWin()}))},h.reset=function(){this.back.interactive=!1,this.keyDrag=!1,this.key.position.set(249,87),this.actionFail(),this.box0.visible=!0,this.box1.visible=!1,this.showCursor(),this.timeBomb.resetBomb(),this.timeBomb.stopBomb(!0),this.glow.visible||(this.glow.visible=!0,this.bottle.stop(0),this.allTargets.push(this.glow))},h.update=function(t){this.glow.visible&&(this.glow.rotation-=.05,this.sin+=.05,this.bottle.rotation=.7*Math.sin(this.sin)),this.box0.visible&&this.here.scale.set(1+.1*Math.sin(this.sin))},Question39}(s.a)}}]);