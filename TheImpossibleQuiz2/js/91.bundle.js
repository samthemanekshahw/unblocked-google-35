(this.webpackJsonp=this.webpackJsonp||[]).push([[91],{139:function(t,e,i){"use strict";i.r(e),i.d(e,"default",(function(){return a}));var s=i(52),o=i(0),n=i(6),r=i(57),l=i(8);function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a=function(t){var e,i;i=t,(e=Question67).prototype=Object.create(i.prototype),e.prototype.constructor=e,e.__proto__=i;var s;s=Question67;function Question67(e){var i;_defineProperty(_assertThisInitialized(i=t.call(this,"./assets/questions/q67/q67-number.png",e)||this),"here",void 0),_defineProperty(_assertThisInitialized(i),"round",void 0),_defineProperty(_assertThisInitialized(i),"back",void 0),_defineProperty(_assertThisInitialized(i),"box0",void 0),_defineProperty(_assertThisInitialized(i),"box1",void 0),_defineProperty(_assertThisInitialized(i),"botleBox",void 0),_defineProperty(_assertThisInitialized(i),"bottle",void 0),_defineProperty(_assertThisInitialized(i),"block0",void 0),_defineProperty(_assertThisInitialized(i),"block1",void 0),_defineProperty(_assertThisInitialized(i),"block2",void 0),_defineProperty(_assertThisInitialized(i),"block00",void 0),_defineProperty(_assertThisInitialized(i),"key",void 0),_defineProperty(_assertThisInitialized(i),"open",void 0),_defineProperty(_assertThisInitialized(i),"glow",void 0),_defineProperty(_assertThisInitialized(i),"lock",void 0),_defineProperty(_assertThisInitialized(i),"hint",void 0),_defineProperty(_assertThisInitialized(i),"allTargets",[]),_defineProperty(_assertThisInitialized(i),"oldSpot",void 0),_defineProperty(_assertThisInitialized(i),"phase",0),_defineProperty(_assertThisInitialized(i),"blockInterval",void 0),_defineProperty(_assertThisInitialized(i),"keyPoints",[]),_defineProperty(_assertThisInitialized(i),"keyDrag",!1),_defineProperty(_assertThisInitialized(i),"tapPoint",{x:0,y:0}),_defineProperty(_assertThisInitialized(i),"sin",0),_defineProperty(_assertThisInitialized(i),"textDM",void 0),_defineProperty(_assertThisInitialized(i),"checkHint",void 0);i.label.x=5,i.label.y=4,i.box0=i.addChild(new o.c),i.box1=i.addChild(new o.c),i.box1.visible=!1,i.here=i.box0.addChild(o.n.from("./assets/questions/q11/q11_pad.png")),i.here.anchor.set(.5,.9),i.here.position.set(275,257),i.textDM=i.here.addChild(o.n.from("./assets/questions/q11/q11_m.png")),i.textDM.anchor.set(.5),i.textDM.y=-133,i.round=i.box0.addChild(o.n.from("./assets/questions/q11/q11-button.png")),i.round.anchor.set(.5),i.round.position.set(282,312),i.lock=i.box1.addChild(new l.a("./assets/questions/q11/lock/l*.png",17,0)),i.lock.position.set(484,171),i.lock.scale.set(1.1),i.lock.anchor.set(.5),i.lock.ID=7,i.lock.hitZone=i.lock.addChild(new o.e).beginFill(255,.01).drawRect(-25,-25,60,53),i.allTargets.push(i.lock);for(var s,n=[159,90,159,168,164,247,256,45,419,48,419,247,164,322,136,322,104,322,72,322,34,321,34,278,74,276,76,253,75,226,37,219],r=0;r<16;r++)(s=i.box1.addChild(new l.a("./assets/questions/q39/button/*.png",2,0))).position.set(n.shift(),n.shift()),15===r?s.scale.set(.55):r>5&&s.scale.set(.4),s.anchor.set(.5),s.ID=1,s.hitZone=s.addChild(new o.e).beginFill(255,.01).drawCircle(0,0,20),i.allTargets.push(s);i.botleBox=i.box1.addChild(new o.c),i.botleBox.position.set(284,259),i.glow=i.botleBox.addChild(o.n.from("./assets/questions/q39/q39-bottle/effect.png")),i.glow.ID=0,i.glow.hitZone=i.botleBox.addChild(new o.e).beginFill(255,.01).drawCircle(0,0,30),i.glow.anchor.set(.5),i.glow.scale.set(.9),i.allTargets.push(i.glow),i.bottle=i.botleBox.addChild(new l.a("./assets/questions/q39/q39-bottle/f*.png",4,0)),i.bottle.anchor.set(.5),i.open=i.box1.addChild(new l.a("./assets/questions/q67/q67_green/f*.png",2,0)),i.open.position.set(38,182),i.open.ID=2,i.open.hitZone=i.open.addChild(new o.e).beginFill(255,.01).drawCircle(0,0,18),i.allTargets.push(i.open),i.block0=i.box1.addChild(o.n.from("./assets/questions/q67/q67-door.png")),i.block0.anchor.set(.5),i.block0.y0=18,i.block0.position.set(216,i.block0.y0),i.block0.y1=-42,i.block0.ID=4,i.block0.hitZone=i.block0.addChild(new o.e).beginFill(255,.01).drawRect(-17,-2,30,58),i.allTargets.push(i.block0),i.block1=i.box1.addChild(o.n.from("./assets/questions/q67/q67-bloc.png")),i.block1.anchor.set(.5),i.block1.y0=-28,i.block1.position.set(345,i.block1.y0),i.block1.y1=32,i.block1.ID=4,i.block1.hitZone=i.block1.addChild(new o.e).beginFill(255,.01).drawRect(-29,-16,58,58),i.allTargets.push(i.block1),i.block2=i.box1.addChild(o.n.from("./assets/questions/q67/q67-bloc.png")),i.block2.anchor.set(.5),i.block2.rotation=.5*Math.PI,i.block2.x0=502,i.block2.position.set(i.block2.x0,111),i.block2.x1=432,i.block2.ID=4,i.block2.hitZone=i.block2.addChild(new o.e).beginFill(255,.01).drawRect(-29,-16,58,58),i.allTargets.push(i.block2),i.block00=i.box1.addChild(new o.c),i.block00.position.set(85,231),i.block00.ID=5,i.block00.hitZone=i.block00.addChild(new o.e).beginFill(255,.01).drawRect(0,0,54,40),i.allTargets.push(i.block00),i.back=i.box1.addChild(new l.a("./assets/questions/q67/q67-back-*.png",2,0,0)),i.key=i.box1.addChild(o.n.from("./assets/questions/q11/q11-key.png")),i.key.anchor.set(.5),i.key.position.set(157,47),i.key.ID=3,i.key.hitZone=i.key.addChild(new o.e).beginFill(255,.01).drawRect(-25,-15,50,30),i.allTargets.push(i.key),n=[-18,-12,18,-5,18,8,-18,10];for(var a=0;a<4;a++)i.keyPoints.unshift(new o.g(n.shift(),n.shift()));return i.hint=i.box1.addChild(o.n.from("./assets/questions/q67/q67-title-2.png")),i.hint.anchor.set(.5),i.hint.position.set(288,152),i.hint.alpha=0,void 0===window.isTouchScreen?e.stage.signalClick.once(i.enableControl,_assertThisInitialized(i)):i.enableControl(),i}var a=Question67.prototype;return a.enableControl=function(){var t;if(window.isTouchScreen){var e;this.round.on("pointerdown",this.startRun,this),this.back.on("pointerup",this.reset,this),this.textDM.texture=o.q.from("./assets/questions/q11/q11_m.png"),this.box1.removeChild(this.botleBox);for(var i=[],s=0;s<this.box1.children.length;s++)1===(e=this.box1.getChildAt(s)).ID&&i.push(e);for(;i.length;)this.box1.removeChild(i.pop());t="./assets/questions/q67/q67-touch.png"}else this.round.on("pointerover",this.startRun,this),this.textDM.texture=o.q.from("./assets/questions/q11/q11_d.png"),this.key.on("pointerdown",this.startDrag,this).on("pointerup",this.startDrag,this).on("pointeroutside",this.startDrag,this).interactive=!0,t="./assets/questions/q67/q67-back-1.png";this.round.interactive=!0,this.round.buttonMode=!0,this.back.on("pointermove",this.testMove,this),this.checkHint||(this.checkHint=new r.a(t))},a.startDrag=function(t){if("pointerdown"===t.type){var e=this.key.toLocal(t.data.global);this.tapPoint={x:e.x,y:e.y}}this.keyDrag="pointerdown"===t.type},a.showCursor=function(t){void 0===t&&(t=!0);var e=this.appp.stage.renderer.plugins.interaction;t?(e.cursorStyles.default="inherit",e.cursorStyles.pointer="pointer",e.setCursorMode("pointer"),e.setCursorMode("default")):(e.cursorStyles.default="none",e.cursorStyles.pointer="none",e.setCursorMode("pointer"),e.setCursorMode("default"))},a.startRun=function(t){var e=this;this.box1.visible||(this.box1.visible=!0,this.box0.visible=!1,this.back.interactive=!0),this.blockInterval=setInterval((function(){n.a.to(e.block1,{duration:.5,y:e.block1.y1}),n.a.to(e.block2,{duration:.5,x:e.block2.x1}),setTimeout((function(){n.a.to(e.block1,{duration:.5,y:e.block1.y0}),n.a.to(e.block2,{duration:.5,x:e.block2.x0})}),1500)}),3e3)},a.testMove=function(t){var e=this;if(3!==this.phase){var i,s,o=this.box1.toLocal(t.data.global);if(this.keyDrag&&this.key.position.set(o.x-this.tapPoint.x,o.y-this.tapPoint.y),this.keyDrag){if(window.isTouchScreen){if(0!=this.checkHint.getPixel(o.x,o.y))return void this.reset()}else for(var r=0;r<this.keyPoints.length;r++)if(i=this.key.toGlobal(this.keyPoints[r]),0!=this.checkHint.getPixel(i.x,i.y))return void this.reset()}else if(0!=this.checkHint.getPixel(o.x,o.y))return void this.reset();for(var l=!1,a=0;a<this.allTargets.length;a++)if((s=this.allTargets[a]).hitZone.containsPoint(t.data.global)){if(0===s.ID)this.showCursor(!1),this.sounds.play("lvl39-67-108"),this.glow.visible=!1,this.bottle.play(0,1,!1,(function(){return e.bottle.stop(-1)})),this.allTargets.splice(a,1);else if(1===s.ID||2===s.ID)0===s.currentframe&&(s.stop(1),2===s.ID&&(0===this.phase&&(this.back.stop(1),this.removeTarget(5),this.phase=1,n.a.to(this.block0,{duration:1.2,y:this.block0.y1})),this.sounds.play("lvl42-67"),n.a.to(this.hint,{alpha:1,duration:.2}))),this.oldSpot=s;else if(3===s.ID)this.phase=2,window.isTouchScreen&&(this.keyDrag=!0),this.removeTarget(3);else if(4===s.ID||5===s.ID)this.reset();else if(7===s.ID&&2===this.phase){this.key.visible=!1,this.sounds.play("key_open"),this.back.interactive=!1,this.lock.play(1,1,!1,(function(){return e.theEnd()}));this.lock.playQueue([1,2,2,2,2,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],!1,(function(){return e.theEnd()})),this.phase=3}l=!0;break}!l&&this.oldSpot&&(this.oldSpot.stop(0),2===this.oldSpot.ID&&n.a.to(this.hint,{alpha:0,duration:.2}),this.oldSpot=null)}},a.removeTarget=function(t){for(var e=0;e<this.allTargets.length;e++)this.allTargets[e].ID===t&&this.allTargets.splice(e,1)},a.theEnd=function(){var t=this;this.showCursor(),this.sounds.play("intro_222"),this.checkHint.destroy(),this.lock.playQueue([15,16],!0,(function(){return t.theEnd()})),this.lock.once("pointerup",(function(){t.visible=!1,t.actionWin()})).interactive=!0},a.reset=function(){this.back.interactive=!1,this.box0.visible=!0,this.box1.visible=!1,this.showCursor(),this.phase>1&&(this.key.position.set(157,47),this.allTargets.push(this.key)),this.phase>0&&(n.a.killTweensOf(this.block0),this.block0.position.set(216,this.block0.y0),this.allTargets.push(this.block00),this.back.stop(0)),this.glow.visible||(this.glow.visible=!0,this.bottle.stop(0),this.allTargets.push(this.glow)),this.actionFail(),this.phase=0,this.keyDrag=!1,n.a.killTweensOf(this.block1),n.a.killTweensOf(this.block2),clearInterval(this.blockInterval)},a.update=function(t){if(this.keyDrag){var e=this.key.parent.toGlobal(this.key.position);if(this.block1.containsPoint(e)||this.block1.containsPoint(e))return void this.reset()}this.box1.visible&&this.glow.visible&&(this.glow.rotation-=.05,this.sin+=.05,this.bottle.rotation=.7*Math.sin(this.sin)),this.box0.visible&&(this.sin+=.05,this.here.scale.set(1+.1*Math.sin(this.sin)))},Question67}(s.a)}}]);