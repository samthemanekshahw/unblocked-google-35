(this.webpackJsonp=this.webpackJsonp||[]).push([[49],{178:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return p}));var s=i(52),n=i(0),o=i(6),a=i(8),r=i(7),l=i(27),h=i(2);function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d=function(e){var t,i;i=e,(t=Crystal).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var s;s=Crystal;function Crystal(t){var i;return _defineProperty(_assertThisInitialized(i=e.call(this)||this),"glow",void 0),_defineProperty(_assertThisInitialized(i),"crystal",void 0),_defineProperty(_assertThisInitialized(i),"shine",void 0),_defineProperty(_assertThisInitialized(i),"hitZ",void 0),_defineProperty(_assertThisInitialized(i),"x0",0),_defineProperty(_assertThisInitialized(i),"y0",0),_defineProperty(_assertThisInitialized(i),"boomAction",void 0),i.crystal=i.addChild(n.n.from("./assets/questions/q29/q29-crystal/f0.png")),i.crystal.anchor.set(.5),i.crystal.pi=0,i.glow=i.addChild(n.n.from("./assets/questions/q29/q29-crystal/f1.png")),i.glow.anchor.set(.5),i.glow.visible=!1,i.shine=i.addChild(new a.a("./assets/questions/q29/shine/f*.png",4,-1)),i.shine.anchor.set(.5),t&&(i.hitZ=i.addChild(new n.e).beginFill(255,.01).drawCircle(0,0,t)),i}var o=Crystal.prototype;return o.hideMe=function(){this.shine.stop(-1),this.glow.visible=!1,this.crystal.fly=!1},o.toAppear=function(e,t,i){var s=this;this.crystal.scale.set(.1),this.crystal.alpha=.1,this.alpha=1,this.boomAction=i,e.play(0,1,!1,(function(){e.stop(-1)})),this.addChild(e);var n=h.v.timeline();n.to(this.crystal.scale,{x:1,y:1,duration:.5,ease:"power1.out",onComplete:function(){s.crystal.fly=!0,s.glow.visible=!0,s.shine.playQueue([0,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,-1,-1,-1,-1,2,3,-1,-1,-1,-1],!0,null,12)}}),n.to(this.crystal,{alpha:1,duration:.2})},o.update=function(e){this.crystal.fly&&(this.crystal.pi+=.07,this.crystal.rotation=.3*Math.sin(this.crystal.pi))},Crystal}(n.c),c=i(17);function q29_screen_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q29_screen_defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var p=function(e){var t,i;i=e,(t=Question29).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var s;s=Question29;function Question29(t){var i;q29_screen_defineProperty(q29_screen_assertThisInitialized(i=e.call(this,"./assets/questions/q29/q29-number.png",t)||this),"valve",void 0),q29_screen_defineProperty(q29_screen_assertThisInitialized(i),"crystal",void 0),q29_screen_defineProperty(q29_screen_assertThisInitialized(i),"drag",void 0),q29_screen_defineProperty(q29_screen_assertThisInitialized(i),"bg",void 0),q29_screen_defineProperty(q29_screen_assertThisInitialized(i),"allAnim",[]),q29_screen_defineProperty(q29_screen_assertThisInitialized(i),"effect",void 0),q29_screen_defineProperty(q29_screen_assertThisInitialized(i),"hitZ",void 0),q29_screen_defineProperty(q29_screen_assertThisInitialized(i),"youWin",!1),q29_screen_defineProperty(q29_screen_assertThisInitialized(i),"event",void 0),q29_screen_defineProperty(q29_screen_assertThisInitialized(i),"point",void 0),q29_screen_defineProperty(q29_screen_assertThisInitialized(i),"ready",!0);i.addChildAt(new n.e,0).beginFill(15924280).drawRect(0,0,r.a.stage.width,r.a.stage.height);i.addChild(n.n.from("./assets/questions/q29/q29-title.png")).position.set(155,7);var s=i.addChild(new n.c);s.position.set(458,6);var o=s.addChild(new a.a("./assets/questions/q29/flow/b*.png",20,1));o.anchor.set(0),o.play(0),o.position.set(6,89);var h=s.addChild(new a.a("./assets/questions/q29/splash/b*.png",3,1));h.anchor.set(0),h.play(0),h.position.set(-22,85);s.addChild(n.n.from("./assets/questions/q29/q29-valve.png"));i.hitZ=new n.i(461,100,30,400),i.effect=new a.a("./assets/shared/effect8/f*.png",8,-1),i.effect.anchor.set(.5);for(var p,u=[57,165,103,286,112,59,152,220,203,127,266,216,277,339,393,98,377,185,403,289,292,94],f=[3,3,5,5,3,3,4,3,5,1,3],_loop=function(e){e<10?((p=i.addChild(new l.a(i.bigBoom.bind(q29_screen_assertThisInitialized(i)),t.sounds,.8,!0))).boom.setNewTextures("./assets/shared/bomb23/boom6/f*.png",6,-1),p.signalOnBoom.add((function(e){var t;i.drag=null;for(var s=0;s<i.allAnim.length;s++)(t=i.allAnim[s]).bomb&&t!=e&&(t.stopBomb(),t.bomb.setNewTextures("./assets/shared/bomb23/f*.png",23,17),t.scale.set(.7));i.ready=!1,i.crystal.interactive=!1}))):((p=i.addChild(new l.a((function(){for(var s=0;s<i.allAnim.length;s++)if(p.interactive=!1,i.allAnim[e]===p){t.get(c.a).stop("clock-tick"),i.allAnim.splice(e,1);break}t.controller.awardSkip()}),t.sounds,.8,!0))).green=!0,p.bomb.setNewTextures("./assets/questions/q29/bomb_green23/f*.png",23,17),p.boom.setNewTextures("./assets/questions/q29/bomb_green23/boom6/f*.png",6,-1)),p.boom.anchor.set(.54,.5),p.hitZ=p.addChild(new n.e).beginFill(255,.01).drawCircle(0,0,27),p.hitArea=new n.b(0,0,27),p.x0=u.shift(),p.y0=u.shift(),p.time=f.shift(),p.on("pointerup",i.pointerTap,q29_screen_assertThisInitialized(i)).on("pointerdown",i.pointerTap,q29_screen_assertThisInitialized(i)).interactive=!0,p.buttonMode=!0,p.sound=i.appp.sounds,i.allAnim.push(p),p.bigBooom=i.bigBooomB.bind(p)},b=0;b<11;b++)_loop(b);return i.crystal=i.addChild(new d(22)),i.crystal.on("pointertap",(function(){if(i.crystal.alpha>0){for(var e,t=0;t<i.allAnim.length;t++)(e=i.allAnim[t]).stopBomb&&e.stopBomb(!1);i.youWin=!0,i.event?i.appp.stage.signalStagePointer.detach(i.event):i.off("pointermove",i.moveListener,q29_screen_assertThisInitialized(i)),i.actionWin(1)}else i.crystal.toAppear(i.effect,0)}),q29_screen_assertThisInitialized(i)),i.crystal.interactive=!0,i.crystal.buttonMode=!0,i.crystal.x0=521,i.crystal.y0=278,i.allAnim.push(i.crystal),i.interactive=!0,i.resetLevel(),void 0===window.isTouchScreen?t.stage.signalClick.once(i.enableControl,q29_screen_assertThisInitialized(i)):i.enableControl(),i}var h=Question29.prototype;return h.resetLevel=function(){for(var e,t=this,i=0;i<this.allAnim.length;i++)(e=this.allAnim[i]).position.set(e.x0,e.y0),e.bomb&&!e.green?(e.resetBomb(),e.stopBomb(),e.bomb.setNewTextures("./assets/shared/bomb23/f*.png",23,17)):e.bomb&&e.bomb.setNewTextures("./assets/questions/q29/bomb_green23/f*.png",23,17),e.bomb&&e.bomb.scale.set(.7),e.alpha=.01,e.visible=!0,e.scale.set(.7);o.a.delayedCall(1,(function(){t.sounds.playLoop("lvl29-water")}))},h.enableControl=function(){window.isTouchScreen?this.event=this.appp.stage.signalStagePointer.add(this.touchListener.bind(this)):this.on("pointermove",this.moveListener,this)},h.touchListener=function(e){e?this.on("pointermove",this.moveListener,this):this.off("pointermove",this.moveListener,this)},h.bigBoom=function(e){var t=this;this.actionFail(!0),this.resetLevel(),o.a.delayedCall(1,(function(){t.crystal.interactive=!0,t.ready=!0}))},h.bigBooomB=function(e){var t=this;this.sound.play("bomb"),this.ready=!1,this.bomb.stop(-1),this.digits.stop(-1),this.signalOnBoom.dispatch(this),this.boom.play(0,1,!1,(function(){if(t.green)t.boom.stop(-1),t.boomAction&&t.boomAction();else{t.boom.scale.set(1.4);var e=o.a.timeline();e.to(t.boom.scale,{x:2,y:2,duration:.1,ease:"power2.out"}),e.to(t.boom,{alpha:0,rotation:30,duration:.4,onComplete:function(){t.boom.stop(-1),t.boom.alpha=1,t.boom.rotation=0,t.resetBomb(),t.stopBomb(),t.alpha=0,t.visible=!0,t.scale.set(.7),t.boomAction&&t.boomAction()}})}}))},h.show=function(){1===this.alpha&&(this.alpha=0,o.a.to(this,{alpha:1})),this.sounds.play("lvl28-78-114-eructation")},h.moveListener=function(e){if(this.ready&&!this.youWin){var t,i=e.data.global,s=this.drag;if(s)s.digits.run&&this.hitZ.contains(i.x,i.y)&&s.putWater(null,"./assets/shared/"+(this.drag.green?"bomb_green23":"bomb23")+"/water15/f*.png"),i=this.toLocal(i),this.drag.position.set(i.x-s.lock.dx,i.y-s.lock.dy);else for(var n=0;n<this.allAnim.length;n++)(t=this.allAnim[n]).hitZ.containsPoint(i)&&t.alpha<.9&&(t.alpha=1,t.toAppear(this.effect,0))}},h.update=function(e){for(var t=0;t<this.allAnim.length;t++)this.allAnim[t].update(e)},h.pointerTap=function(e){if("pointerdown"===e.type){var t=e.currentTarget;if(t.alpha<.3)return t.alpha=1,void t.toAppear(this.effect,0);this.drag=t;var i=this.toLocal(e.data.global);this.drag.lock={dx:i.x-this.drag.x,dy:i.y-this.drag.y}}else this.drag=null},Question29}(s.a)}}]);